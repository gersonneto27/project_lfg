{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mask } from \"vue-the-mask\";\nimport { parse, format } from \"date-fns\";\nexport default {\n  directives: {\n    mask\n  },\n  data() {\n    return {\n      name: \"\",\n      birth_date: \"\",\n      proposal_value: \"\",\n      document: \"\",\n      form: {},\n      proposalConfigFields: []\n    };\n  },\n  created() {\n    this.loadProposalConfigFields();\n  },\n  methods: {\n    loadProposalConfigFields() {\n      fetch(\"http://localhost:8000/api/proposal-configs/\").then(response => response.json()).then(data => {\n        this.proposalConfigFields = data;\n        this.initForm();\n      }).catch(error => {\n        console.error(\"Error loading proposal config fields:\", error);\n      });\n    },\n    initForm() {\n      // Inicializar o objeto de formul치rio com os campos do formul치rio\n      this.form = {}; // Inicializar como objeto vazio\n\n      for (const field of this.proposalConfigFields) {\n        this.form[field.name] = {\n          value: \"\"\n        };\n      }\n    },\n    fieldType(fieldType) {\n      if (fieldType === \"char\") {\n        return \"text\";\n      } else if (fieldType === \"integer\") {\n        return \"number\";\n      } else {\n        return \"text\";\n      }\n    },\n    submitForm() {\n      const brazilianDate = parse(this.birth_date, \"dd/MM/yyyy\", new Date());\n      const americanDate = format(brazilianDate, \"yyyy-MM-dd\");\n      const proposalData = [];\n      for (const field of this.proposalConfigFields) {\n        const value = this.form[field.name]?.value;\n        proposalData.push({\n          field: field.id,\n          value: value\n        });\n      }\n      this.proposal_value_formatted = this.proposal_value.replace(/[.,]/g, \"\");\n      const payload = {\n        name: this.name,\n        birth_date: americanDate,\n        document: this.document,\n        proposal_value: this.proposal_value_formatted,\n        dados_proposta: proposalData\n      };\n      fetch(\"http://localhost:8000/api/proposals/create\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(payload)\n      }).then(response => response.json()).then(data => {\n        if (data.proposal_id) {\n          this.successMessage = \"Proposta enviada com sucesso!\";\n          console.log(\"Form submitted successfully:\", data);\n        }\n      }).catch(error => {\n        console.error(\"Error submitting form:\", error);\n      });\n    }\n  }\n};","map":{"version":3,"names":["mask","parse","format","directives","data","name","birth_date","proposal_value","document","form","proposalConfigFields","created","loadProposalConfigFields","methods","fetch","then","response","json","initForm","catch","error","console","field","value","fieldType","submitForm","brazilianDate","Date","americanDate","proposalData","push","id","proposal_value_formatted","replace","payload","dados_proposta","method","headers","body","JSON","stringify","proposal_id","successMessage","log"],"sources":["/var/project_lfg/frontend/src/components/HelloWorld.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-form @submit.prevent=\"submitForm\">\n      <v-col>\n        <v-sheet>\n          <v-text-field\n            v-model=\"name\"\n            :rules=\"nameRules\"\n            :counter=\"10\"\n            label=\"Nome Completo\"\n            required\n          ></v-text-field>\n        </v-sheet>\n      </v-col>\n\n      <v-col>\n        <v-sheet>\n          <v-text-field\n            v-model=\"birth_date\"\n            :rules=\"dateRules\"\n            :counter=\"10\"\n            v-mask=\"['##/##/####']\"\n            label=\"Data de Nascimento\"\n            required\n            :type=\"date\"\n          ></v-text-field>\n        </v-sheet>\n      </v-col>\n\n      <v-col>\n        <v-sheet>\n          <v-text-field\n            v-model=\"proposal_value\"\n            :rules=\"valueRules\"\n            v-mask=\"[\n              '#.###.###.###,##',\n              '###.###.###,##',\n              '##.###.###,##',\n              '#.###.###,##',\n              '###.###,##',\n              '##.###,##',\n              '#.###,##',\n              '###,##',\n              '##,##',\n              '#,##',\n            ]\"\n            label=\"Valor da Proposta\"\n            required\n          ></v-text-field>\n        </v-sheet>\n      </v-col>\n\n      <v-col>\n        <v-sheet>\n          <v-text-field\n            v-model=\"document\"\n            :rules=\"valueRules\"\n            v-mask=\"[\n              '###.###.###',\n              '##.###.###',\n              '#.###.###',\n              '###.###',\n              '##.###',\n              '#.###',\n              '###',\n            ]\"\n            label=\"Documento de Identidade\"\n            required\n          ></v-text-field>\n        </v-sheet>\n      </v-col>\n\n      <v-col v-for=\"field in proposalConfigFields\" :key=\"field.id\">\n        <v-sheet>\n          <v-text-field\n            v-model=\"form[field.name].value\"\n            :label=\"field.name\"\n            :type=\"fieldType(field.field_type)\"\n            outlined\n          ></v-text-field>\n        </v-sheet>\n      </v-col>\n\n      <v-col>\n        <v-sheet>\n          <v-btn block type=\"submit\">Enviar Proposta</v-btn>\n        </v-sheet>\n      </v-col>\n      <v-alert v-if=\"successMessage\" type=\"success\" dense>\n        {{ successMessage }}\n      </v-alert>\n    </v-form>\n  </v-container>\n</template>\n\n<script>\nimport { mask } from \"vue-the-mask\";\nimport { parse, format } from \"date-fns\";\nexport default {\n  directives: {\n    mask,\n  },\n  data() {\n    return {\n      name: \"\",\n      birth_date: \"\",\n      proposal_value: \"\",\n      document: \"\",\n      form: {},\n      proposalConfigFields: [],\n    };\n  },\n\n  created() {\n    this.loadProposalConfigFields();\n  },\n\n  methods: {\n    loadProposalConfigFields() {\n      fetch(\"http://localhost:8000/api/proposal-configs/\")\n        .then((response) => response.json())\n        .then((data) => {\n          this.proposalConfigFields = data;\n          this.initForm();\n        })\n        .catch((error) => {\n          console.error(\"Error loading proposal config fields:\", error);\n        });\n    },\n\n    initForm() {\n      // Inicializar o objeto de formul치rio com os campos do formul치rio\n      this.form = {}; // Inicializar como objeto vazio\n\n      for (const field of this.proposalConfigFields) {\n        this.form[field.name] = { value: \"\" };\n      }\n    },\n    fieldType(fieldType) {\n      if (fieldType === \"char\") {\n        return \"text\";\n      } else if (fieldType === \"integer\") {\n        return \"number\";\n      } else {\n        return \"text\";\n      }\n    },\n\n    submitForm() {\n      const brazilianDate = parse(this.birth_date, \"dd/MM/yyyy\", new Date());\n      const americanDate = format(brazilianDate, \"yyyy-MM-dd\");\n      const proposalData = [];\n      for (const field of this.proposalConfigFields) {\n        const value = this.form[field.name]?.value;\n        proposalData.push({ field: field.id, value: value });\n      }\n\n      this.proposal_value_formatted = this.proposal_value.replace(/[.,]/g, \"\");\n\n      const payload = {\n        name: this.name,\n        birth_date: americanDate,\n        document: this.document,\n        proposal_value: this.proposal_value_formatted,\n        dados_proposta: proposalData,\n      };\n\n      fetch(\"http://localhost:8000/api/proposals/create\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      })\n        .then((response) => response.json())\n        .then((data) => {\n          if (data.proposal_id) {\n            this.successMessage = \"Proposta enviada com sucesso!\";\n            console.log(\"Form submitted successfully:\", data);\n          }\n        })\n        .catch((error) => {\n          console.error(\"Error submitting form:\", error);\n        });\n    },\n  },\n};\n</script>\n<style>\n.d-flex {\n  display: flex;\n}\n\n.justify-center {\n  justify-content: center;\n}\n\n.align-center {\n  align-items: center;\n}\n\n.v-container {\n  height: 100vh;\n}\n\n.pa-4 {\n  padding: 1rem;\n  margin-right: 1rem;\n  margin-left: 1rem;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}